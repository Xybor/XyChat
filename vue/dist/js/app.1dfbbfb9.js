(function(e){function t(t){for(var r,c,u=t[0],s=t[1],i=t[2],l=0,d=[];l<u.length;l++)c=u[l],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&d.push(a[c][0]),a[c]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);f&&f(t);while(d.length)d.shift()();return o.push.apply(o,i||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==a[s]&&(r=!1)}r&&(o.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},a={app:0},o=[];function c(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-2d0d6d35":"8d736c5b","chunk-2d2086b7":"869dfb63","chunk-2d217357":"7a1a49c4"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=r);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,u.nc&&s.setAttribute("nonce",u.nc),s.src=c(e);var i=new Error;o=function(t){s.onerror=s.onload=null,clearTimeout(l);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;i.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",i.name="ChunkLoadError",i.type=r,i.request=o,n[1](i)}a[e]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/ui/",u.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var f=i;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"207a":function(e,t,n){"use strict";function r(){return localStorage.getItem("jwt_token")}function a(e){return localStorage.setItem("jwt_token",e)}function o(){return localStorage.removeItem("jwt_token")}function c(){return localStorage.getItem("username")}function u(e){return localStorage.setItem("username",e)}n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return u}))},"2e30":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),a={class:"row"},o={class:"col-sm-6 offset-sm-3 mt-3"};function c(e,t,n,c,u,s){var i=Object(r["u"])("Navbar"),l=Object(r["u"])("router-view");return Object(r["o"])(),Object(r["c"])("div",null,[Object(r["f"])(i),Object(r["f"])("div",a,[Object(r["f"])("div",o,[e.alert.message?(Object(r["o"])(),Object(r["c"])("div",{key:0,class:"alert ".concat(e.alert.type)},Object(r["w"])(e.alert.message),3)):Object(r["d"])("",!0)])]),Object(r["f"])(l)])}var u=n("5530"),s={class:"navbar navbar-expand-lg navbar-light bg-light"},i={class:"container-fluid"},l=Object(r["f"])("a",{class:"navbar-brand",href:"#"},"XyChat",-1),f=Object(r["f"])("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[Object(r["f"])("span",{class:"navbar-toggler-icon"})],-1),d={class:"collapse navbar-collapse",id:"navbarSupportedContent"},b={class:"navbar-nav me-auto mb-2 mb-lg-0"},p={class:"nav-item"},g=Object(r["e"])("Home"),m={key:0,class:"nav-item"},v=Object(r["e"])("Login"),j={key:1,class:"nav-item"},O=Object(r["e"])("Register"),h={key:2,class:"nav-item dropdown"},y={class:"nav-link dropdown-toggle",href:"#",id:"profile-user",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},w={class:"dropdown-menu","aria-labelledby":"profile-user"},k=Object(r["e"])("Your profile"),S=Object(r["f"])("div",{class:"dropdown-divider"},null,-1);function I(e,t,n,a,o,c){var u=Object(r["u"])("router-link");return Object(r["o"])(),Object(r["c"])("nav",s,[Object(r["f"])("div",i,[l,f,Object(r["f"])("div",d,[Object(r["f"])("ul",b,[Object(r["f"])("li",p,[Object(r["f"])(u,{class:"nav-link",to:"/"},{default:Object(r["A"])((function(){return[g]})),_:1})]),e.status.loggedIn?Object(r["d"])("",!0):(Object(r["o"])(),Object(r["c"])("li",m,[Object(r["f"])(u,{class:"nav-link",to:"/login"},{default:Object(r["A"])((function(){return[v]})),_:1})])),e.status.loggedIn?Object(r["d"])("",!0):(Object(r["o"])(),Object(r["c"])("li",j,[Object(r["f"])(u,{class:"nav-link",to:"/register"},{default:Object(r["A"])((function(){return[O]})),_:1})])),e.status.loggedIn?(Object(r["o"])(),Object(r["c"])("li",h,[Object(r["f"])("a",y," Hi "+Object(r["w"])(e.user.username)+"! ",1),Object(r["f"])("ul",w,[Object(r["f"])("li",null,[Object(r["f"])(u,{class:"dropdown-item",to:"/profile"},{default:Object(r["A"])((function(){return[k]})),_:1})]),S,Object(r["f"])("li",null,[Object(r["f"])("span",{class:"dropdown-item",onClick:t[1]||(t[1]=function(){return e.logout&&e.logout.apply(e,arguments)})},"Logout")])])])):Object(r["d"])("",!0)])])])])}var _=n("5502"),P={computed:Object(u["a"])({},Object(_["c"])("account",["status","user"])),methods:Object(u["a"])({},Object(_["b"])("account",["logout"]))};P.render=I;var R=P,L={components:{Navbar:R},computed:Object(u["a"])({},Object(_["c"])({alert:function(e){return e.alert}})),methods:Object(u["a"])({},Object(_["b"])({clearAlert:"alert/clear"})),watch:{$route:function(e,t){this.clearAlert()}}};n("a594");L.render=c;var x=L,C=(n("d3b7"),n("3ca3"),n("ddb0"),n("caad"),n("6c02")),A=n("207a"),F=Object(r["C"])("data-v-14db2229");Object(r["r"])("data-v-14db2229");var U={class:"home container mt-5"},q=Object(r["f"])("p",null,"Welcome to XyChat",-1);Object(r["p"])();var T=F((function(e,t,n,a,o,c){return Object(r["o"])(),Object(r["c"])("div",U,[q])})),E={name:"Home"};n("8007");E.render=T,E.__scopeId="data-v-14db2229";var H=E,M=[{path:"/",name:"Home",component:H},{path:"/login",name:"Login",component:function(){return n.e("chunk-2d2086b7").then(n.bind(null,"a55b"))}},{path:"/register",name:"Register",component:function(){return n.e("chunk-2d0d6d35").then(n.bind(null,"73cf"))}},{path:"/profile",name:"Profile",component:function(){return n.e("chunk-2d217357").then(n.bind(null,"c66d"))}}],J=Object(C["a"])({history:Object(C["b"])("/ui/"),routes:M});J.beforeEach((function(e,t,n){var r=["/","/home","/login","/register"],a=!r.includes(e.path),o=Object(A["a"])();if(a&&!o)return n("/login");n()}));var N=J,X=n("fef9"),W=Object(A["a"])(),Y=Object(A["b"])(),$=W?{status:{loggedIn:!0},user:{token:W,username:Y}}:{status:{loggedIn:!1},user:null},z={login:function(e,t){var n=e.dispatch,r=e.commit,a=t.username,o=t.password;r("loginRequest",{token:null,username:a});var c=X["a"].login(a,o);c.then((function(e){var t=e.data.data;if(t.token){var a=t.token,o=t.username;Object(A["d"])(a),Object(A["e"])(o),N.push("/profile"),r("loginSuccess",{token:a,username:o})}else r("loginFailure"),n("alert/error","Login Fail",{root:!0})})).catch((function(e){r("loginFailure"),n("alert/error","Login Fail",{root:!0})}))},register:function(e,t){var n=e.dispatch,r=e.commit,a=t.username,o=t.password;r("registerRequest",{username:a});var c=X["a"].register(a,o);c.then((function(e){r("registerSuccess"),n("alert/success","Register success fully",{root:!0})})).catch((function(e){r("registerFailure"),n("alert/error","Register fail",{root:!0})}))},logout:function(e){e.dispatch;var t=e.commit;t("logout"),N.push("/"),X["a"].logout()}},B={loginRequest:function(e,t){e.status={loggedIn:!0},e.user=t},loginSuccess:function(e,t){e.status={loggedIn:!0},e.user=t},loginFailure:function(e){e.status={loggedIn:!1},e.user=null},logout:function(e){e.status={loggedIn:!1},e.user=null},registerRequest:function(e,t){e.status={registering:!0}},registerSuccess:function(e,t){e.status={registering:!1}},registerFailure:function(e,t){e.status={registering:!1}}},D={namespaced:!0,state:$,actions:z,mutations:B},G={type:null,message:null},K={success:function(e,t){var n=e.commit;n("success",t)},error:function(e,t){var n=e.commit;n("error",t)},clear:function(e){var t=e.commit;t("clear")}},Q={success:function(e,t){e.type="alert-success",e.message=t},error:function(e,t){e.type="alert-danger",e.message=t},clear:function(e){e.type=null,e.message=null}},V={namespaced:!0,state:G,actions:K,mutations:Q},Z=new _["a"].Store({modules:{account:D,alert:V}});n("ab8b"),n("7b17");Object(r["b"])(x).use(Z).use(N).mount("#app")},8007:function(e,t,n){"use strict";n("f06e")},a594:function(e,t,n){"use strict";n("2e30")},f06e:function(e,t,n){},fef9:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d");var r=n("207a"),a={apiUrl:"http://localhost:1999/api/v1"},o=n("bc3a"),c=n.n(o),u={login:s,logout:f,register:i,getProfile:l};function s(e,t){var n=new URLSearchParams;return n.append("username",e),n.append("password",t),c.a.get("".concat(a.apiUrl,"/auth"),{params:n})}function i(e,t){var n=new URLSearchParams;return n.append("username",e),n.append("password",t),c.a.get("".concat(a.apiUrl,"/register"),{params:n})}function l(){var e=new URLSearchParams;return e.append("token",Object(r["a"])()),c.a.get("".concat(a.apiUrl,"/profile"),{params:e})}function f(){Object(r["c"])()}}});
//# sourceMappingURL=app.1dfbbfb9.js.map