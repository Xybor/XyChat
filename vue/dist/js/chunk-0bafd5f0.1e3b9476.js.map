{"version":3,"sources":["webpack:///./src/views/Profile.vue?b6a2","webpack:///./src/views/Profile.vue","webpack:///./src/views/Profile.vue?8bdc"],"names":["class","src","alt","for","value","profile","fname","lname","username","type","id","gender","changeProfile","placeholder","password","oldPassword","newPassword","verifyPassword","changePassword","setup","store","state","account","accountInfo","getProfile","rs","then","response","data","dispatch","meta","errno","catch","err","render","__scopeId"],"mappings":"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","file":"js/chunk-0bafd5f0.1e3b9476.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Profile.vue?vue&type=style&index=0&id=71d8e97a&scoped=true&lang=css\"","<template>\r\n  <div class=\"profile container mt-5\">\r\n    <div class=\"row\">\r\n      <div class=\"card col-lg-4 no-radius\">\r\n        <div class=\"card-body text-center mt-3\">\r\n          <img\r\n            class=\"rounded-circle\"\r\n            src=\"https://via.placeholder.com/256\"\r\n            alt=\"avatar\"\r\n          />\r\n          <div class=\"mt-3\">\r\n            <span\r\n              ><b>{{ profile.fname }} {{ profile.lname }}</b></span\r\n            >\r\n            <br />\r\n            <span class=\"text-muted\">@{{ profile.username }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"card col-lg-8 no-radius\">\r\n        <div class=\"card-body\">\r\n          <h5>Profile settings</h5>\r\n          <div class=\"row\">\r\n            <div class=\"col-6\">\r\n              <div class=\"form-group\">\r\n                <label for=\"firstname\">First name</label>\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  id=\"firstname\"\r\n                  v-model=\"profile.fname\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"col-6\">\r\n              <div class=\"form-group\">\r\n                <label for=\"lastname\">Last name</label>\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  id=\"lastname\"\r\n                  v-model=\"profile.lname\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"form-group mt-2\">\r\n            <label for=\"exampleFormControlInput1\">Gender</label>\r\n            <select class=\"form-select\" v-model=\"profile.gender\">\r\n              <option value=\"0\"></option>\r\n              <option value=\"male\">Male</option>\r\n              <option value=\"female\">Female</option>\r\n              <option value=\"other\">Other</option>\r\n            </select>\r\n          </div>\r\n\r\n          <button class=\"btn btn-outline-success mt-3\" @click=\"changeProfile\">\r\n            Change profile\r\n          </button>\r\n\r\n          <h5 class=\"mt-5\">Change password</h5>\r\n          <div class=\"form-group\">\r\n            <label for=\"oldPassword\">Old password</label>\r\n            <input\r\n              type=\"password\"\r\n              class=\"form-control\"\r\n              id=\"oldPassword\"\r\n              placeholder=\"********\"\r\n              v-model=\"password.oldPassword\"\r\n            />\r\n          </div>\r\n\r\n          <div class=\"form-group mt-2\">\r\n            <label for=\"newPassword\">New password</label>\r\n            <input\r\n              type=\"password\"\r\n              class=\"form-control\"\r\n              id=\"newPassword\"\r\n              placeholder=\"********\"\r\n              v-model=\"password.newPassword\"\r\n            />\r\n          </div>\r\n\r\n          <div class=\"form-group mt-2\">\r\n            <label for=\"verifyPassword\">Verify new password</label>\r\n            <input\r\n              type=\"password\"\r\n              class=\"form-control\"\r\n              id=\"verifyPassword\"\r\n              placeholder=\"********\"\r\n              v-model=\"password.verifyPassword\"\r\n            />\r\n          </div>\r\n\r\n          <button class=\"btn btn-outline-success mt-3\" @click=\"changePassword\">\r\n            Change password\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { userSerive } from \"../services/userService\";\r\nimport { ref, onMounted } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nexport default {\r\n  setup() {\r\n    const store = useStore();\r\n    const profile = ref({\r\n      fname: \"fname\",\r\n      lname: \"lname\",\r\n      gender: \"0\",\r\n      ...store.state.account.accountInfo,\r\n    });\r\n    const password = ref({\r\n      oldPassword: \"\",\r\n      newPassword: \"\",\r\n      verifyPassword: \"\",\r\n    });\r\n\r\n    const getProfile = () => {\r\n      const rs = userSerive.getProfile();\r\n      rs.then((response) => {\r\n        profile.value = {\r\n          ...profile.value,\r\n          ...response.data.data,\r\n        };\r\n      });\r\n    };\r\n\r\n    onMounted(() => {\r\n      getProfile();\r\n    });\r\n\r\n    var changeProfile = () => {};\r\n    var changePassword = () => {\r\n      if (password.value.newPassword != password.value.verifyPassword) {\r\n        store.dispatch(\"alert/error\", \"Passwords don't match\");\r\n      } else {\r\n        const rs = userSerive.changePassword(\r\n          profile.value.id,\r\n          password.value.oldPassword,\r\n          password.value.newPassword\r\n        );\r\n        rs.then((response) => {\r\n          if (response.data.meta.errno == 0) {\r\n            store.dispatch(\"alert/success\", \"Password has been changed\");\r\n            password.value = {\r\n              oldPassword: \"\",\r\n              newPassword: \"\",\r\n              verifyPassword: \"\",\r\n            };\r\n          } else {\r\n            store.dispatch(\"alert/error\", \"The current password is incorrect\");\r\n          }\r\n        }).catch((err) => {\r\n          store.dispatch(\"alert/error\", \"Something went wrong\");\r\n        });\r\n      }\r\n    };\r\n\r\n    return {\r\n      profile,\r\n      password,\r\n      changePassword,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nlabel {\r\n  color: gray;\r\n}\r\n</style>\r\n","import { render } from \"./Profile.vue?vue&type=template&id=71d8e97a&scoped=true\"\nimport script from \"./Profile.vue?vue&type=script&lang=js\"\nexport * from \"./Profile.vue?vue&type=script&lang=js\"\n\nimport \"./Profile.vue?vue&type=style&index=0&id=71d8e97a&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-71d8e97a\"\n\nexport default script"],"sourceRoot":""}